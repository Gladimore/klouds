{"version":3,"file":"klouds.min.js","mappings":"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","sources":["webpack://klouds/webpack/universalModuleDefinition","webpack://klouds/./src/shader.frag","webpack://klouds/./src/shader.vert","webpack://klouds/./src/graphics.ts","webpack://klouds/webpack/bootstrap","webpack://klouds/webpack/runtime/define property getters","webpack://klouds/webpack/runtime/hasOwnProperty shorthand","webpack://klouds/webpack/runtime/make namespace object","webpack://klouds/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"klouds\"] = factory();\n\telse\n\t\troot[\"klouds\"] = factory();\n})(self, () => {\nreturn ","export default \"precision mediump float;\\n\\nuniform vec2 resolution;\\nuniform float layerCount;\\nuniform float time;\\nuniform vec3 bgColor;\\nuniform vec3 cloudColor1;\\nuniform vec3 cloudColor2;\\n\\n#define TAU 6.28318530718\\n\\nfloat func(float pX) {\\n    return 0.6 * (0.5 * sin(0.1 * pX) + 0.5 * sin(0.553 * pX) + 0.7 * sin(1.2 * pX));\\n}\\n\\nfloat funcR(float pX) {\\n    return 0.5 + 0.25 * (1.0 + sin(mod(40.0 * pX, TAU)));\\n}\\n\\nfloat layer(vec2 pQ, float pT) {\\n    vec2 Qt = 3.5 * pQ;\\n    pT *= 0.5;\\n    Qt.x += pT;\\n\\n    float Xi = floor(Qt.x);\\n    float Xf = Qt.x - Xi - 0.5;\\n\\n    vec2 C;\\n    float Yi;\\n    float D = 1.0 - step(Qt.y,  func(Qt.x));\\n\\n    Yi = func(Xi + 0.5);\\n    C = vec2(Xf, Qt.y - Yi ); \\n    D =  min(D, length(C) - funcR(Xi + pT / 80.0));\\n\\n    Yi = func(Xi + 1.0 + 0.5);\\n    C = vec2(Xf - 1.0, Qt.y - Yi ); \\n    D =  min(D, length(C) - funcR(Xi + 1.0+ pT / 80.0));\\n\\n    Yi = func(Xi - 1.0 + 0.5);\\n    C = vec2(Xf + 1.0, Qt.y - Yi ); \\n    D =  min(D, length(C) - funcR(Xi - 1.0 + pT / 80.0));\\n\\n    return min(1.0, D);\\n}\\n\\nvoid main() {\\n    float t = time;\\n    vec2 UV = 2.0 * (gl_FragCoord.xy - resolution.xy / 2.0) / min(resolution.x, resolution.y);\\t\\n    \\n    vec3 Color = bgColor;\\n\\n    for(float i = 0.0; i < 0.8; i += 0.1) {\\n        if (i >= layerCount) {\\n            break;\\n        }\\n\\n        float Lt =  t * (0.5 + 2.0 * i) * (1.0 + 0.1 * sin(226.0 * i)) + 1000.0 * i;\\n        vec2 Lp = vec2(100.0 * i, 0.8 * (i / (layerCount - 0.0999) / 0.8) - 0.3);\\n        float L = layer(UV + Lp, Lt);\\n\\n        float Blur = 4.0 * (0.5 * abs(2.0 - 5.0 * i)) / (11.0 - 5.0 * i);\\n\\n        float V = mix(0.0, 1.0, 1.0 - smoothstep(0.0, 0.01 + 0.2 * Blur, L));\\n        vec3 Lc = mix(cloudColor1, cloudColor2, i / (layerCount - 0.0999) / 0.8);\\n\\n        Color = mix(Color, Lc,  V);\\n    }\\n\\n    gl_FragColor = vec4(Color, 1.0);\\n}\\n\";","export default \"attribute vec3 position;\\n\\nvoid main() {\\n    gl_Position = vec4(position, 1.0);\\n}\\n\";","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShaderType = void 0;\nexports.createContext = createContext;\nexports.createShader = createShader;\nexports.createProgram = createProgram;\nexports.resizeCanvasToDisplaySize = resizeCanvasToDisplaySize;\nfunction createContext(canvas) {\n    return canvas.getContext('webgl');\n}\nvar ShaderType;\n(function (ShaderType) {\n    ShaderType[ShaderType[\"VERTEX\"] = 0] = \"VERTEX\";\n    ShaderType[ShaderType[\"FRAGMENT\"] = 1] = \"FRAGMENT\";\n})(ShaderType || (exports.ShaderType = ShaderType = {}));\nfunction createShader(gl, type, source) {\n    var shader = type === ShaderType.VERTEX\n        ? gl.createShader(gl.VERTEX_SHADER)\n        : gl.createShader(gl.FRAGMENT_SHADER);\n    if (!shader) {\n        console.error('Failed to create WebGL shader');\n        return null;\n    }\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        console.debug(gl.getShaderInfoLog(shader));\n        console.error('Failed to compile WebGL shader');\n        gl.deleteShader(shader);\n        return null;\n    }\n    return shader;\n}\nfunction createProgram(gl, vertShaderSrc, fragShaderSrc, attributeNames, uniformNames) {\n    var program = gl.createProgram();\n    if (!program) {\n        console.error('Failed to create WebGL program');\n        return null;\n    }\n    var vertexShader = createShader(gl, ShaderType.VERTEX, vertShaderSrc);\n    var fragmentShader = createShader(gl, ShaderType.FRAGMENT, fragShaderSrc);\n    if (!vertexShader || !fragmentShader) {\n        console.error('Failed to create a shader while creating a program');\n        return null;\n    }\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    gl.validateProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        gl.deleteProgram(program);\n        gl.deleteShader(vertexShader);\n        gl.deleteShader(fragmentShader);\n        console.error(\"Failed to link WebGL program\");\n        console.debug(gl.getProgramInfoLog(program));\n        return null;\n    }\n    if (!gl.getProgramParameter(program, gl.VALIDATE_STATUS)) {\n        gl.deleteProgram(program);\n        gl.deleteShader(vertexShader);\n        gl.deleteShader(fragmentShader);\n        console.error(\"Failed to validate WebGL program\");\n        console.debug(gl.getProgramInfoLog(program));\n        return null;\n    }\n    var attributes = {};\n    for (var i = 0; i < attributeNames.length; ++i) {\n        var name_1 = attributeNames[i];\n        var attr = gl.getAttribLocation(program, name_1);\n        if (attr === -1) {\n            console.error(\"Program attribute named \\\"\".concat(name_1, \"\\\" doesn't exist\"));\n            gl.deleteProgram(program);\n            return null;\n        }\n        attributes[name_1] = attr;\n    }\n    var uniforms = {};\n    for (var i = 0; i < uniformNames.length; ++i) {\n        var name_2 = uniformNames[i];\n        var uniform = gl.getUniformLocation(program, name_2);\n        if (uniform === null) {\n            console.error(\"Program uniform named \\\"\".concat(name_2, \"\\\" doesn't exist\"));\n            gl.deleteProgram(program);\n            return null;\n        }\n        uniforms[name_2] = uniform;\n    }\n    return {\n        handle: program,\n        attributes: attributes,\n        uniforms: uniforms\n    };\n}\nfunction resizeCanvasToDisplaySize(canvas) {\n    var width = canvas.clientWidth;\n    var height = canvas.clientHeight;\n    if (canvas.width !== width || canvas.height !== height) {\n        canvas.width = width;\n        canvas.height = height;\n        return true;\n    }\n    return false;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Klouds = exports.VERSION = void 0;\nexports.create = create;\nvar shader_vert_1 = require(\"./shader.vert\");\nvar shader_frag_1 = require(\"./shader.frag\");\nvar graphics_1 = require(\"./graphics\");\nexports.VERSION = PACKAGE_VERSION;\nfunction normalizeColor(color) {\n    var div = document.createElement('div');\n    div.style.display = 'none';\n    div.style.color = color;\n    document.body.appendChild(div);\n    var strColors = getComputedStyle(div).color || 'rgb(0, 0, 0)';\n    var numColors = strColors.match(/[+-]?\\d+(\\.\\d+)?/g);\n    var intColors = numColors\n        ? numColors.map(function (a) { return parseInt(a, 10); })\n        : [0, 0, 0];\n    if (div.parentElement) {\n        div.parentElement.removeChild(div);\n    }\n    if (intColors.length > 3) {\n        intColors.length = 3;\n    }\n    else if (intColors.length < 3) {\n        return [0, 0, 0];\n    }\n    return intColors;\n}\nfunction parseColor(color) {\n    var result = [0, 0, 0];\n    if (typeof color === 'string') {\n        normalizeColor(color).forEach(function (color, idx) {\n            result[idx] = color / 255;\n        });\n    }\n    else if (Array.isArray(color) && color.length === 3) {\n        color.slice(0, 3).forEach(function (color, idx) {\n            result[idx] = color / 255;\n        });\n    }\n    return result;\n}\nvar Klouds = /** @class */ (function () {\n    function Klouds(options) {\n        var _this = this;\n        this.isRunning = false;\n        this.accumTime = 0;\n        this.lastTime = performance.now();\n        this.render = function (time) {\n            var gl = _this.gl;\n            var program = _this.program;\n            var buffer = _this.buffer;\n            var dt = (time - _this.lastTime) * _this.speed * 0.001;\n            _this.accumTime += dt;\n            _this.lastTime = time;\n            (0, graphics_1.resizeCanvasToDisplaySize)(_this.canvas);\n            gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n            gl.useProgram(program.handle);\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            var posAttrib = program.attributes['position'];\n            gl.enableVertexAttribArray(posAttrib);\n            gl.vertexAttribPointer(posAttrib, 3, gl.FLOAT, false, 0, 0);\n            gl.uniform2f(program.uniforms['resolution'], gl.canvas.width, gl.canvas.height);\n            gl.uniform1f(program.uniforms['layerCount'], _this.layerCount);\n            gl.uniform1f(program.uniforms['time'], _this.accumTime);\n            gl.uniform3fv(program.uniforms['bgColor'], _this.bgColor);\n            gl.uniform3fv(program.uniforms['cloudColor1'], _this.cloudColor1);\n            gl.uniform3fv(program.uniforms['cloudColor2'], _this.cloudColor2);\n            gl.drawArrays(gl.TRIANGLES, 0, 6);\n            if (_this.isRunning) {\n                requestAnimationFrame(_this.render);\n            }\n        };\n        var canvas = this.queryRootElement(options.selector);\n        if (!canvas) {\n            throw new Error(\"Invalid options.selector value passed to Klouds\");\n        }\n        this.canvas = canvas;\n        var speed = options.speed || 1;\n        var layerCount = options.layerCount || 5;\n        var cloudColor1 = options.cloudColor1 || [25, 178, 204];\n        var cloudColor2 = options.cloudColor2 || [255, 255, 255];\n        var bgColor = options.bgColor || [0, 102, 128];\n        canvas.style.width = '100%';\n        canvas.style.height = '100%';\n        this.initGraphics(canvas);\n        this.setSpeed(speed);\n        this.setLayerCount(layerCount);\n        this.setBgColor(bgColor);\n        this.setCloudColor1(cloudColor1);\n        this.setCloudColor2(cloudColor2);\n        this.start();\n    }\n    Klouds.prototype.queryRootElement = function (selector) {\n        if (typeof selector === 'string') {\n            var element = document.querySelector(selector);\n            if (!element) {\n                console.error('options.selector element not found');\n                return null;\n            }\n            else if (!(element instanceof HTMLCanvasElement)) {\n                console.error('options.selector element is not a <canvas> element');\n                return null;\n            }\n            else {\n                return element;\n            }\n        }\n        else if (selector instanceof HTMLElement) {\n            if (selector instanceof HTMLCanvasElement) {\n                return selector;\n            }\n            else {\n                console.error('options.selector element is not a <canvas> element');\n                return null;\n            }\n        }\n        else {\n            console.error('options.selector value is invalid');\n            return null;\n        }\n    };\n    Klouds.prototype.initGraphics = function (canvas) {\n        var gl = (0, graphics_1.createContext)(canvas);\n        if (!gl) {\n            throw new Error('Failed to create WebGL context');\n        }\n        var program = (0, graphics_1.createProgram)(gl, shader_vert_1.default, shader_frag_1.default, ['position'], [\n            'resolution',\n            'layerCount',\n            'time',\n            'bgColor',\n            'cloudColor1',\n            'cloudColor2'\n        ]);\n        if (!program) {\n            throw new Error('Failed to create WebGL program');\n        }\n        var buffer = gl.createBuffer();\n        if (!buffer) {\n            gl.deleteProgram(program);\n            throw new Error('Failed to create WebGL buffer');\n        }\n        var posAttrib = program.attributes['position'];\n        gl.enableVertexAttribArray(posAttrib);\n        gl.vertexAttribPointer(posAttrib, 3, gl.FLOAT, false, 0, 0);\n        var bufferData = [\n            [-1, -1, 0],\n            [1, -1, 0],\n            [-1, 1, 0],\n            [-1, 1, 0],\n            [1, -1, 0],\n            [1, 1, 0]\n        ];\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(bufferData.reduce(function (prev, cur) { return prev.concat(cur); }, [])), gl.STATIC_DRAW);\n        this.gl = gl;\n        this.program = program;\n        this.buffer = buffer;\n    };\n    Klouds.prototype.start = function () {\n        if (this.isRunning) {\n            return;\n        }\n        this.isRunning = true;\n        requestAnimationFrame(this.render);\n    };\n    Klouds.prototype.stop = function () {\n        this.isRunning = false;\n    };\n    Klouds.prototype.setSpeed = function (speed) {\n        this.speed = Math.max(-100, Math.min(100, speed));\n    };\n    Klouds.prototype.setCloudColor1 = function (color) {\n        var c = parseColor(color);\n        if (c) {\n            this.cloudColor1 = c;\n        }\n    };\n    Klouds.prototype.setCloudColor2 = function (color) {\n        var c = parseColor(color);\n        if (c) {\n            this.cloudColor2 = c;\n        }\n    };\n    Klouds.prototype.setBgColor = function (color) {\n        var c = parseColor(color);\n        if (c) {\n            this.bgColor = c;\n        }\n    };\n    Klouds.prototype.setLayerCount = function (count) {\n        this.layerCount = Math.max(1, Math.min(8, count)) / 10;\n    };\n    Klouds.prototype.getSpeed = function () {\n        return this.speed;\n    };\n    Klouds.prototype.getLayerCount = function () {\n        return this.layerCount;\n    };\n    Klouds.prototype.getBgColor = function () {\n        return this.bgColor.slice();\n    };\n    Klouds.prototype.getCloudColor1 = function () {\n        return this.cloudColor1.slice();\n    };\n    Klouds.prototype.getCloudColor2 = function () {\n        return this.cloudColor2.slice();\n    };\n    return Klouds;\n}());\nexports.Klouds = Klouds;\nfunction create(options) {\n    return new Klouds(options);\n}\nif (window && typeof window.jQuery !== 'undefined') {\n    ;\n    window.jQuery.fn.Klouds = function (options) {\n        options = options || {};\n        var elements = this.get();\n        var skies = [];\n        for (var i = 0; i < elements.length; ++i) {\n            options.selector = elements[i];\n            skies.push(new Klouds(options));\n        }\n        return skies;\n    };\n}\n"],"names":["root","factory","exports","module","define","amd","self","ShaderType","createShader","gl","type","source","shader","VERTEX","VERTEX_SHADER","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","debug","getShaderInfoLog","error","deleteShader","Object","defineProperty","value","createContext","canvas","getContext","createProgram","vertShaderSrc","fragShaderSrc","attributeNames","uniformNames","program","vertexShader","fragmentShader","FRAGMENT","attachShader","linkProgram","validateProgram","getProgramParameter","LINK_STATUS","deleteProgram","getProgramInfoLog","VALIDATE_STATUS","attributes","i","length","name_1","attr","getAttribLocation","concat","uniforms","name_2","uniform","getUniformLocation","handle","resizeCanvasToDisplaySize","width","clientWidth","height","clientHeight","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","Klouds","VERSION","create","options","shader_vert_1","shader_frag_1","graphics_1","parseColor","color","result","div","document","createElement","style","display","body","appendChild","numColors","getComputedStyle","match","intColors","map","a","parseInt","parentElement","removeChild","normalizeColor","forEach","idx","Array","isArray","slice","_this","this","isRunning","accumTime","lastTime","performance","now","render","time","buffer","dt","speed","viewport","useProgram","bindBuffer","ARRAY_BUFFER","posAttrib","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform2f","uniform1f","layerCount","uniform3fv","bgColor","cloudColor1","cloudColor2","drawArrays","TRIANGLES","requestAnimationFrame","queryRootElement","selector","Error","initGraphics","setSpeed","setLayerCount","setBgColor","setCloudColor1","setCloudColor2","start","element","querySelector","HTMLCanvasElement","HTMLElement","default","createBuffer","bufferData","Float32Array","reduce","prev","cur","STATIC_DRAW","stop","Math","max","min","c","count","getSpeed","getLayerCount","getBgColor","getCloudColor1","getCloudColor2","window","jQuery","fn","elements","skies","push"],"sourceRoot":""}